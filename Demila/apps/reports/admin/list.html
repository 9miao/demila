<link href="/static/css/custom/ucenter.css" rel="stylesheet" />
<div class="pagetit">
  <div class="navblock">
    <ul class="titnav clr">
      <li><a href="/{$languageURL}admin" title="管理首页">管理首页</a></li>
      <li class="pipe">&gt;</li>
      <li><a href="?m=system&c=list">设置</a></li>
      <li class="pipe">&gt;</li>
      <li>{$lang.reports}</li>
    </ul>
    <h2>{$lang.reports}</h2>
  </div>
</div>
<!--<div class="page-info">
    <div class="container">
      <div id="breadcrumbs">
        <a href="/{$languageURL}admin" class="first">主页</a> \ <a href="?m=system&c=list">设置</a> \
      </div>
      <h1 class="page-title">{$lang.reports}</h1>
    </div>
	{include file="$root_path/apps/admin/admin_tabsy.html"}
  </div>-->
<div class="ucbg">
	<div class="ucblock paddingt clr">
		{include file="$root_path/apps/lists/leftlist_admin.html"}
		<div class="rightdetail_admin">
			<div class="sideblock">
			<form action="" class="horizontal-form item-form disable-on-submit" action="" method="post" enctype="multipart/form-data">
				<div class="input-group">
				<label for="datepick">{$lang.from_date}</label>
				<div class="inputs">
				<input type="text" class="ipttheme" id="datepick" value="{$smarty.post.from_date}" name="from_date"/>
				</div>
				</div>
				<div class="input-group">
				<label for="datepick2">{$lang.to_date}</label>
				<div class="inputs">
				<input type="text" class="ipttheme" id="datepick2" value="{$smarty.post.to_date}" name="to_date"/>
				</div>
				</div>
				<div class="form-submit">
				<button type="submit" name="report" class="btntheme2 btnsize submit auto-width">{$lang.generate_report}</button>
				</div>
			</form>
			{if $reportData}
			<div class="input-group">
				<label for="datepick">{$lang.results}</label>
				<div class="inputs clr">
					<div id="placeholder" style="width:600px;height:300px;float:left;"></div>
					<p id="choices" style="float: left;">{$lang.graph}:</p>  
				</div>
			</div>
			{literal}
			<script id="source" language="javascript" type="text/javascript">
seajs.use(["jq", "modules/administry"], function($, adm){
	$(function () {
		var datasets = {
			"Total": {
			label: "{/literal}{$lang.grid_total}{literal}",
			data: [{/literal}{foreach from=$reportData item=r key=k name=foo}[{$smarty.foreach.foo.index}, {$r.total}]{if !$smarty.foreach.foo.last},{/if}{/foreach}{literal}]
			},        
			"Receive": {
			label: "{/literal}{$lang.grid_receive}{literal}",
			data: [{/literal}{foreach from=$reportData item=r key=k name=foo}[{$smarty.foreach.foo.index}, {$r.receive}]{if !$smarty.foreach.foo.last},{/if}{/foreach}{literal}]
			},        
			"Referal": {
			label: "{/literal}{$lang.grid_referal}{literal}",
			data: [{/literal}{foreach from=$reportData item=r key=k name=foo}[{$smarty.foreach.foo.index}, {$r.referal}]{if !$smarty.foreach.foo.last},{/if}{/foreach}{literal}]
			},        
			"Win": {
			label: "{/literal}{$lang.grid_win}{literal}",
			data: [{/literal}{foreach from=$reportData item=r key=k name=foo}[{$smarty.foreach.foo.index}, {$r.win}]{if !$smarty.foreach.foo.last},{/if}{/foreach}{literal}]
			},
			"Deposit": {
			label: "{/literal}{$lang.grid_deposit}{literal}",
			data: [{/literal}{foreach from=$reportData item=r key=k name=foo}[{$smarty.foreach.foo.index}, {$r.deposit}]{if !$smarty.foreach.foo.last},{/if}{/foreach}{literal}]
			},        			         
			"Withdraw": {
			label: "{/literal}{$lang.grid_withdraw}{literal}",
			data: [{/literal}{foreach from=$reportData item=r key=k name=foo}[{$smarty.foreach.foo.index}, {$r.withdraw}]{if !$smarty.foreach.foo.last},{/if}{/foreach}{literal}]
			}        			         
		},
		options = {
			xaxis: { mode: "time", ticks: [{/literal}{foreach from=$reportData item=r key=k name=foo}[{$smarty.foreach.foo.index}, "{$k}"]{if !$smarty.foreach.foo.last},{/if}{/foreach}{literal}] },
			selection: { mode: "xy" },
			grid: { hoverable: true, clickable: true },
			series: { lines: { show: true }, points: { show: true } }
		};
		adm.plotInit("#placeholder", {
			datasets: datasets,
			options: options,
			contents: "{/literal}{$currency.symbol}{literal}"
		});
	});
});
			</script>	
			{/literal}
			{/if}
			</div>
		</div>
	</div>
</div>
<link href="/static/scripts/plug/datepicker/datepicker.css" rel="stylesheet" />
{literal}
<script type="text/javascript">
seajs.use(["jq", "modules/administry"], function($, adm){
	$(function(){
		adm.dateInput([$('#datepick'), $('#datepick2')]);
	});
});
</script>
{/literal}